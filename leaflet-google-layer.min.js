!function e(t,o,i){function n(r,l){if(!o[r]){if(!t[r]){var a="function"==typeof require&&require;if(!l&&a)return a(r,!0);if(s)return s(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var h=o[r]={exports:{}};t[r][0].call(h.exports,function(e){var o=t[r][1][e];return n(o||e)},h,h.exports,e,t,o,i)}return o[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(e,t,o){(function(e){var o="undefined"!=typeof window?window.L:void 0!==e?e.L:null,i=["roadmap","satellite"];o.TileLayer.Google=o.TileLayer.extend({options:{GoogleTileAPIKey:null,mapType:"roadmap",language:"en-GB",region:"gb"},statics:{TILE_REQUEST:"https://www.googleapis.com/tile/v1/tiles/{z}/{x}/{y}?session={sessionToken}&orientation=0&key={GoogleTileAPIKey}",ATTRIBUTION_URL:"https://www.googleapis.com/tile/v1/viewport?session={sessionToken}&zoom={zoom}&north={north}&south={south}&east={east}&west={west}&key={GoogleTileAPIKey}",SESSION_TOKEN_URL:"https://www.googleapis.com/tile/v1/createSession?key={GoogleTileAPIKey}"},_getSessionToken:function(){var e=this;return this._promise||(this._promise=new Promise(function(t,i){var n=o.Util.template(o.TileLayer.Google.SESSION_TOKEN_URL,{GoogleTileAPIKey:e.options.GoogleTileAPIKey}),s=JSON.stringify({mapType:e.options.mapType,language:e.options.language,region:e.options.region,overlay:!0,scale:"scaleFactor1x"}),r=new XMLHttpRequest;r.open("POST",n,!0),r.setRequestHeader("Content-type","application/json"),r.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var o=JSON.parse(r.responseText);e._sessionToken=o.session,t(o)}else i()},r.send(s)})),this._promise},_refreshToken:function(){var e=this;this._getSessionToken().then(function(t){setTimeout(function(){e._needToRefreshToken&&(e._promise=null,e._refreshToken())},1e3*t.expiry-(new Date).getTime()-36e5)}).catch(function(e){console.error("refreshToken",e)})},initialize:function(e){if(!e||!e.GoogleTileAPIKey)throw new Error("Must supply options.GoogleTileAPIKey");if(e=o.setOptions(this,e),i.indexOf(e.mapType)<0)throw new Error("'"+e.mapType+"' is an invalid mapType");this._sessionToken=null,this._needToRefreshToken=!1,this._promise=null,o.Browser.android||this.on("tileunload",this._onTileRemove)},createTile:function(e,t){var i=document.createElement("img");return o.DomEvent.on(i,"load",o.bind(this._tileOnLoad,this,t,i)),o.DomEvent.on(i,"error",o.bind(this._tileOnError,this,t,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",this._getSessionToken().then(function(o){i.src=this.getTileUrl(e),t(null,i)}.bind(this)).catch(function(e){console.error(e),t(e)}),i},getAttribution:function(){return this.attribution},getTileUrl:function(e){return o.Util.template(o.TileLayer.Google.TILE_REQUEST,{z:e.z,x:e.x,y:e.y,sessionToken:this._sessionToken,GoogleTileAPIKey:this.options.GoogleTileAPIKey})},onAdd:function(e){e.on("moveend",this._updateAttribution,this),o.TileLayer.prototype.onAdd.call(this,e),this._needToRefreshToken=!0,this._refreshToken(),this._updateAttribution()},onRemove:function(e){e.off("moveend",this._updateAttribution,this),this._needToRefreshToken=!1,this._promise=null,e.attributionControl.removeAttribution(this.attribution),this.attribution=null,o.TileLayer.prototype.onRemove.call(this,e)},_getAttributionUrl:function(){var e=this._map,t=e.getZoom(),i=e.getBounds().toBBoxString().split(",");return o.Util.template(o.TileLayer.Google.ATTRIBUTION_URL,{GoogleTileAPIKey:this.options.GoogleTileAPIKey,sessionToken:this._sessionToken,zoom:t,south:i[0],east:i[1],north:i[2],west:i[3]})},_updateAttribution:function(){var e=this._map,t=this;e&&e.attributionControl&&this._getSessionToken().then(function(){var o=t._getAttributionUrl(),i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&200===this.status&&(e.attributionControl.removeAttribution(t.attribution),t.attribution=JSON.parse(this.responseText).copyright,e.attributionControl.addAttribution(t.attribution))},i.open("GET",o,!0),i.send()}).catch(function(e){console.error("updateAttribution",e)})}}),o.tileLayer.google=function(e){return new o.TileLayer.Google(e)},t.exports=o.TileLayer.Google}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);